<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html"><link rel="search" title="Search" href="../search.html"><link rel="next" title="Trainable Workflow" href="workflow.html"><link rel="prev" title="Frozen Lake" href="example_frozenlake.html">
        <link rel="prefetch" href="../_static/logo.png" as="image">

    <link rel="shortcut icon" href="../_static/logo.png"><!-- Generated with Sphinx 7.4.7 and Furo 2025.12.19 -->
        <title>Countdown - AgentScope Tuner</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d75fae25" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=7bdb33bb" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=8dab3a3b" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=aadf46a8" />
    
    


<style>
  body {
    --color-code-background: #f0f0f0;
  --color-code-foreground: black;
  --color-brand-primary: #2196f3;
  --color-brand-content: #2196f3;
  --color-admonition-background: #f8f9fa;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #64b5f6;
  --color-brand-content: #64b5f6;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #64b5f6;
  --color-brand-content: #64b5f6;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="introduction.html"><div class="brand"><span style='font-weight: 700; color: #2196f3;'>AgentScope</span> <br><span style='font-weight: 900; color: #ff5722;'>Tuner</span></div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-scroll"><a class="sidebar-brand" href="introduction.html">
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/logo.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text"><span style='font-weight: 700; color: #2196f3;'>AgentScope</span> <br><span style='font-weight: 900; color: #ff5722;'>Tuner</span></span>
  
</a><div class="language-switch">
    <div class="language-selector">
        <button class="language-button" onclick="toggleLanguageMenu()">
            <span id="current-lang">English</span>
            <span class="dropdown-arrow"></span>
        </button>
        <div class="language-menu" id="language-menu">
            <a href="#" class="language-option" onclick="switchLanguage('en')">English</a>
            <a href="#" class="language-option" onclick="switchLanguage('zh')">中文</a>
        </div>
    </div>

    <div class="language-selector">
        <button class="language-button" onclick="toggleVersionMenu()">
            <span id="current-version">loading...</span>
            <span class="dropdown-arrow"></span>
        </button>
        <div class="language-menu" id="version-menu">
        </div>
    </div>
</div>

<script>
    function toggleLanguageMenu() {
        const menu = document.getElementById('language-menu');
        menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
    }

    function switchLanguage(lang, skipRedirect = false) {
        // Save language preference
        localStorage.setItem('preferred-language', lang);

        // Update displayed language const
        currentLang = document.getElementById('current-lang');
        currentLang.textContent = lang === 'zh' ? '中文' : 'English';
        document.body.setAttribute('data-current-lang', lang);
        if (!skipRedirect) {
            const currentPath = window.location.pathname;
            let newPath = null;

            if (lang === 'zh' && currentPath.includes('/en/')) {
                newPath = currentPath.replace('/en/', '/zh/');
            } else if (lang === 'en' && currentPath.includes('/zh/')) {
                newPath = currentPath.replace('/zh/', '/en/');
            }
            if (newPath && newPath !== currentPath) {
                window.location.href = newPath + window.location.search + window.location.hash;
                return;
            }
        }

        // Apply language filtering
        filterContentByLanguage(lang);

        // Close dropdown menu
        document.getElementById('language-menu').style.display = 'none';
    }

    function filterContentByLanguage(lang) {
        const captions = document.querySelectorAll('.caption');
        const toctreeItems = document.querySelectorAll('.toctree-l1');

        // Define which captions should be displayed based on the selected language
        const languageMapping = {
            'en': ['Tutorial', 'Example', 'Component', 'Deep Dive'],
            'zh': ['教程', '示例', '组件', '深入探索']
        };

        const visibleCaptions = languageMapping[lang] || [];

        // Filter captions based on the selected language
        captions.forEach(caption => {
            const text = caption.textContent.trim();
            caption.style.display = visibleCaptions.includes(text) ? 'block' : 'none';
        });

        // Filter toctree items based on the selected language
        toctreeItems.forEach(item => {
            const link = item.querySelector('a');
            if (link) {
                const href = link.getAttribute('href') || '';
                if (lang === 'zh') {
                    const hasZh = href.includes('/zh/');
                    const hasEn = href.includes('/en/');
                    const isRelative = !href.startsWith('http') && !href.startsWith('/') && !hasEn;

                    item.style.display = (hasZh || isRelative) ? 'block' : 'none';
                } else {
                    const hasZh = href.includes('/zh/');
                    item.style.display = hasZh ? 'none' : 'block';
                }
            } else {
                item.style.display = 'block';
            }
        });
    }

    document.addEventListener('click', function (e) {
        if (!e.target.closest('.language-selector')) {
            document.getElementById('language-menu').style.display = 'none';
        }
    });
</script><style>
.preview-banner {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    background-color: #fff8e7;
    color: #333;
    text-align: center;
    padding: 12px 50px;
    font-size: 14px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    z-index: 9999;
    animation: slideDown 0.3s ease;
    line-height: 1.5em;
    border-bottom: 1px solid #f0e4d5;
}
.preview-banner strong {
    color: #d9534f;
}
.preview-banner-close {
    position: fixed;
    right: 20px;
    top: 10px;
    cursor: pointer;
    font-size: 14px;
    font-weight: bold;
    color: #d9534f;
    background-color: #fff;
    border: 1px solid #f0d9c3;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    transition: all 0.2s ease;
    z-index: 10000;
}

.preview-banner-close:hover {
    background-color: #d9534f;
    color: #fff;
    box-shadow: 0 3px 6px rgba(0,0,0,0.15);
}
@keyframes slideDown {
    from { transform: translateY(-100%); }
    to { transform: translateY(0); }
}
body.preview-active {
    padding-top: 50px;
}
</style>

<script>
    const VERSIONS = ["preview", "v0.2.0", "v0.1.6", "v0.1.5", "v0.1.4"];
    const VERSION_PATTERN = /^\/(v\d+\.\d+\.\d+)\//;

    function populateVersionMenu() {
        const menu = document.getElementById("version-menu");
        menu.innerHTML = "";

        VERSIONS.forEach(version => {
            const anchor = document.createElement("a");
            anchor.href = "#";
            anchor.className = "language-option";
            anchor.textContent = version;
            anchor.onclick = (e) => {
                e.preventDefault();
                switchVersion(version);
            };
            menu.appendChild(anchor);
        });
    }

    function toggleVersionMenu() {
        const menu = document.getElementById("version-menu");
        menu.style.display = menu.style.display === "block" ? "none" : "block";
    }

    function switchVersion(targetVersion) {
        const currentPath = window.location.pathname;
        let newPath = currentPath;

        document.getElementById("version-menu").style.display = "none";

        const langMatch = currentPath.match(/\/(en|zh)\//);

        if (targetVersion === "preview") {
            if (VERSION_PATTERN.test(currentPath)) {
                newPath = currentPath.replace(VERSION_PATTERN, "/");
            } else {
                newPath = currentPath;
            }
        } else {
            if (VERSION_PATTERN.test(currentPath)) {
                newPath = currentPath.replace(VERSION_PATTERN, `/${targetVersion}/`);
            } else {
                newPath = currentPath.replace(/\/(en|zh)\//, `/${targetVersion}/$1/`);
            }
        }

        const newUrl = newPath + window.location.search + window.location.hash;
        window.location.href = newUrl;
    }

    document.addEventListener("click", function (e) {
        if (!e.target.closest(".language-selector")) {
            document.getElementById("version-menu").style.display = "none";
        }
    });

    document.addEventListener("DOMContentLoaded", function () {
        populateVersionMenu();

        const currentPath = window.location.pathname;
        let detectedVersion = "preview";

        const match = currentPath.match(VERSION_PATTERN);
        if (match) {
            detectedVersion = match[1];
        }

        const versionSpan = document.getElementById("current-version");
        if (versionSpan) {
            versionSpan.textContent = detectedVersion;
        }

        if (detectedVersion === "preview") {
            document.body.classList.add("preview-active");

            const langMatch = currentPath.match(/\/(en|zh)\//);
            let bannerText = "";

            if (langMatch && langMatch[1] === "zh") {
                bannerText = `
                    您当前浏览的是 <strong>Cookbook 教程文档的 Preview 版本</strong>（对应 GitHub main 分支）。<br>
                    内容可能会随时更新。如果需要参考 <strong>PyPI 稳定版本的文档</strong>，请使用左侧版本切换栏进行切换。
                    <span class="preview-banner-close" title="关闭">×</span>
                `;
            } else {
                bannerText = `
                    You are viewing the <strong>Preview version of the Cookbook tutorial</strong> (GitHub main branch).<br>
                    Content may change frequently. For the <strong>stable PyPI release documentation</strong>, please use the version switcher on the left.
                    <span class="preview-banner-close" title="Close">×</span>
                `;
            }

            const banner = document.createElement("div");
            banner.className = "preview-banner";
            banner.innerHTML = bannerText;
            document.body.appendChild(banner);

            banner.querySelector(".preview-banner-close").onclick = () => {
                banner.remove();
                document.body.classList.remove("preview-active");
            };
        }
    });
</script><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="tune_your_first_agent.html">Tune Your First Agent</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Example</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="example_math_agent.html">Math Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_app_world.html">AppWorld</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_werewolves.html">Werewolves</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_learning_to_ask.html">Learning to Ask</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_frozenlake.html">Frozen Lake</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Countdown</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Component</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">Trainable Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_pipeline.html">Task Reader</a></li>
<li class="toctree-l1"><a class="reference internal" href="task_judger.html">Task Judger</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deep Dive</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualization.html">Training Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="beast_logger.html">Beast-Logger Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_generation.html">Data Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_tracing_feedback_loop.html">Tracing-Feedback Loop</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">教程</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../zh/intro.html">项目简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zh/installation.html">安装指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zh/quickstart.html">快速开始</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zh/tune_your_first_agent.html">训练你的第一个智能体</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">示例</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../zh/example_math_agent.html">数学智能体</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zh/example_app_world.html">AppWorld 智能体</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zh/example_werewolves.html">狼人杀游戏</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zh/example_learning_to_ask.html">学习提问</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zh/example_frozenlake.html">冰冻湖游戏</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zh/example_countdown.html">倒计时数字游戏</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">组件</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../zh/workflow.html">可训练工作流</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zh/data_pipeline.html">任务加载器</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zh/task_judger.html">任务评测器</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">深入探索</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../zh/configuration.html">配置指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zh/visualization.html">训练可视化</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zh/beast_logger.html">Beast-Logger 使用指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zh/data_generation.html">数据生成</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zh/example_tracing_feedback_loop.html">数据回流训练</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/modelscope/AgentJet/blob/main/docs/en/example_countdown.md?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="countdown">
<h1>Countdown<a class="headerlink" href="#countdown" title="Link to this heading">¶</a></h1>
<section id="overview">
<h2>1. Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>Countdown is a math puzzle game. Given a list of numbers and a target number, the player needs to use the numbers and the four basic arithmetic operations (addition, subtraction, multiplication, and division) to form an expression that evaluates to the target number. Each number can be used only once, but parentheses can be used freely to change the order of operations.</p>
</section>
<section id="quick-start">
<h2>2. Quick Start<a class="headerlink" href="#quick-start" title="Link to this heading">¶</a></h2>
<section id="preparation">
<h3>2.1 Preparation<a class="headerlink" href="#preparation" title="Link to this heading">¶</a></h3>
<p>Download the <code class="docutils literal notranslate"><span class="pre">Jiayi-Pan/Countdown-Tasks-3to4</span></code> dataset and split it into training and test sets:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>tutorial/example_countdown/prepare_data.py<span class="w"> </span>--target<span class="o">=</span>Jiayi-Pan/Countdown-Tasks-3to4<span class="w"> </span>--path<span class="o">=</span>/the/path/to/store/dataset
</pre></div>
</div>
<p>The Countdown dataset contains the <code class="docutils literal notranslate"><span class="pre">target</span></code> and <code class="docutils literal notranslate"><span class="pre">nums</span></code> fields and requires custom data formatting logic. For example, when using the <code class="docutils literal notranslate"><span class="pre">huggingface_dat_repo</span></code> task reader method, you need to modify the <code class="docutils literal notranslate"><span class="pre">_load_dataset_split</span></code> method in <code class="docutils literal notranslate"><span class="pre">ajet/task_reader/hf_dataset_reader.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">task</span> <span class="o">=</span> <span class="n">Task</span><span class="p">(</span>
    <span class="n">main_query</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s1">&#39;target&#39;</span><span class="p">:</span> <span class="n">example</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">],</span> <span class="s1">&#39;nums&#39;</span><span class="p">:</span> <span class="n">example</span><span class="p">[</span><span class="s2">&quot;nums&quot;</span><span class="p">]}),</span>
    <span class="n">init_messages</span><span class="o">=</span><span class="p">[],</span>
    <span class="n">task_id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">idx</span><span class="p">),</span>
    <span class="n">env_type</span><span class="o">=</span><span class="s2">&quot;no_env&quot;</span><span class="p">,</span>
    <span class="n">metadata</span><span class="o">=</span><span class="n">example</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="start-training">
<h3>2.2 Start Training<a class="headerlink" href="#start-training" title="Link to this heading">¶</a></h3>
<p>Simply run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># It is recommended to kill all ray, vllm, and env_service processes before starting ( python launcher.py --kill=&quot;python|ray|vllm&quot; )</span>
ajet<span class="w"> </span>--conf<span class="w"> </span>tutorial/example_countdown/countdown.yaml<span class="w"> </span>--backbone<span class="o">=</span><span class="s1">&#39;verl&#39;</span>
</pre></div>
</div>
<details>
<summary>Quick Debugging (Optional)</summary>
<p>If you want to breakpoint-debug the workflow/judge locally:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># (optional) recommended cleanup before debug</span>
<span class="c1"># ajet --kill=&quot;python|ray&quot;</span>

clear<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
ajet<span class="w"> </span>--conf<span class="w"> </span>tutorial/example_countdown/countdown.yaml<span class="w"> </span>--backbone<span class="o">=</span><span class="s1">&#39;debug&#39;</span><span class="w"> </span>--with-logview
</pre></div>
</div>
<p>When <code class="docutils literal notranslate"><span class="pre">--backbone=debug</span></code>, Ray is disabled. You can use a VSCode <code class="docutils literal notranslate"><span class="pre">.vscode/launch.json</span></code> like below:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0.2.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;configurations&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Python Debugger: Launch rollout&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;debugpy&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;request&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;launch&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ajet.launcher&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;console&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integratedTerminal&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;--backbone&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;debug&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;--conf&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;./path/to/yaml.yaml&quot;</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;env&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</details>
</section>
</section>
<section id="understand">
<h2>3. Understand<a class="headerlink" href="#understand" title="Link to this heading">¶</a></h2>
<p>In this section, we will cover the details of this tutorial.</p>
<section id="core-process">
<h3>3.1 Core Process<a class="headerlink" href="#core-process" title="Link to this heading">¶</a></h3>
<p>See details in <code class="docutils literal notranslate"><span class="pre">tutorial/example_countdown/countdown.py</span></code>. You can create new AgentScope Workflow code anywhere in the project.</p>
<ul class="simple">
<li><p><strong>Define the AgentScope workflow</strong></p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">agent</span> <span class="o">=</span> <span class="n">ReActAgent</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;countdown_react_agent&quot;</span><span class="p">,</span>
    <span class="n">sys_prompt</span><span class="o">=</span><span class="n">system_prompt</span><span class="p">,</span>
    <span class="n">model</span><span class="o">=</span><span class="n">model_tuner</span><span class="p">,</span>
    <span class="n">formatter</span><span class="o">=</span><span class="n">DashScopeChatFormatter</span><span class="p">(),</span>
    <span class="n">memory</span><span class="o">=</span><span class="n">InMemoryMemory</span><span class="p">(),</span>
    <span class="n">max_iters</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">msg</span> <span class="o">=</span> <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">reply</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</pre></div>
</div>
<p>In the AgentScope Workflow，you need to write the key information required by the judge into:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">WorkflowOutput</span><span class="p">(</span>
    <span class="n">reward</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">metadata</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;final_answer&quot;</span><span class="p">:</span> <span class="n">final_answer</span><span class="p">,</span>
        <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="n">target</span><span class="p">,</span>
        <span class="s2">&quot;nums&quot;</span><span class="p">:</span> <span class="n">nums</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="configuration-details">
<h3>3.2 Configuration Details<a class="headerlink" href="#configuration-details" title="Link to this heading">¶</a></h3>
<p>Copy and modify key parameters in <code class="docutils literal notranslate"><span class="pre">tutorial/example_countdown/countdown.yaml</span></code>. The most relevant parts in the yaml file are marked with <img src="https://api.iconify.design/lucide:sparkles.svg" class="inline-icon" /> symbols.</p>
<ol class="arabic simple">
<li><p>Read task (corresponds to configuration field <code class="docutils literal notranslate"><span class="pre">ajet.task_reader</span></code>)</p></li>
<li><p>Define Workflow (corresponds to configuration field <code class="docutils literal notranslate"><span class="pre">ajet.rollout.user_workflow</span></code>)</p></li>
</ol>
<ul class="simple">
<li><p>Example: If agentscope workflow is defined in <code class="docutils literal notranslate"><span class="pre">ExampleCountdownLearn</span></code> class of <code class="docutils literal notranslate"><span class="pre">tutorial/example_countdown/countdown.py</span></code></p></li>
<li><p>Then set <code class="docutils literal notranslate"><span class="pre">ajet.rollout.user_workflow</span></code>=<code class="docutils literal notranslate"><span class="pre">tutorial.example_countdown.countdown-&gt;ExampleCountdownLearn</span></code></p></li>
</ul>
<ol class="arabic simple" start="3">
<li><p>Define scoring function (corresponds to configuration field <code class="docutils literal notranslate"><span class="pre">ajet.task_judge.judge_protocol</span></code>)</p></li>
</ol>
<ul class="simple">
<li><p>Example: If agentscope workflow is defined in <code class="docutils literal notranslate"><span class="pre">CountdownAnswerAsJudge</span></code> class of <code class="docutils literal notranslate"><span class="pre">tutorial/example_countdown/countdown_answer_as_judge.py</span></code></p></li>
<li><p>Then set <code class="docutils literal notranslate"><span class="pre">ajet.task_judge.judge_protocol</span></code>=<code class="docutils literal notranslate"><span class="pre">tutorial.example_countdown.countdown_answer_as_judge-&gt;CountdownAnswerAsJudge</span></code></p></li>
</ul>
<ol class="arabic simple" start="4">
<li><p>Specify model (corresponds to configuration field <code class="docutils literal notranslate"><span class="pre">ajet.model.path</span></code>)</p></li>
</ol>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">ajet</span><span class="p">:</span>
<span class="w">    </span><span class="nt">task_reader</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">huggingface_dat_repo</span><span class="w"> </span><span class="c1"># [key] `env_service` or `dataset_file` or `huggingface_dat_repo` or `data_generation`</span>
<span class="w">    </span><span class="nt">rollout</span><span class="p">:</span>
<span class="w">        </span><span class="nt">user_workflow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tutorial.example_countdown.countdown-&gt;ExampleCountdownLearn</span><span class="w"> </span><span class="c1"># [key] Write and select Agent</span>
<span class="w">    </span><span class="nt">task_judge</span><span class="p">:</span>
<span class="w">        </span><span class="c1"># [key] Write and select evaluation function</span>
<span class="w">        </span><span class="nt">judge_protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tutorial.example_countdown.countdown_answer_as_judge-&gt;CountdownAnswerAsJudge</span>
<span class="w">    </span><span class="nt">model</span><span class="p">:</span>
<span class="w">        </span><span class="c1"># [key] Set the model to be trained</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">YOUR_MODEL_PATH</span>
</pre></div>
</div>
</section>
<section id="code-map">
<h3>3.3 Code Map<a class="headerlink" href="#code-map" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tutorial/example_countdown/countdown.py</span></code>: defines the AgentScope workflow (e.g., <code class="docutils literal notranslate"><span class="pre">ExampleCountdownLearn</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tutorial/example_countdown/countdown.yaml</span></code>: wires together task reader, workflow, judge, and model.</p></li>
</ul>
</section>
<section id="reward-evaluation-mechanism">
<h3>3.4 Reward/Evaluation Mechanism<a class="headerlink" href="#reward-evaluation-mechanism" title="Link to this heading">¶</a></h3>
<p>A simple Judge is provided in <code class="docutils literal notranslate"><span class="pre">tutorial/example_countdown/countdown_answer_as_judge.py</span></code>. You can create new Judge code anywhere in the project.</p>
<p>Judge input parameters include:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>workflow_task: Task information（if reference answer is included, it can be retrieved from here）
workflow_output: Task information output (final_answer needs to be added manually)
</pre></div>
</div>
<p>Judge return values:</p>
<ul class="simple">
<li><p>raw_reward</p></li>
<li><p>is_success</p></li>
</ul>
</section>
</section>
<section id="results">
<h2>4. Results<a class="headerlink" href="#results" title="Link to this heading">¶</a></h2>
<section id="training-curves-metrics">
<h3>4.1 Training Curves/Metrics<a class="headerlink" href="#training-curves-metrics" title="Link to this heading">¶</a></h3>
<p><img alt="Tracing curve" src="https://img.alicdn.com/imgextra/i4/O1CN01TtaeD91rnfBF736Zu_!!6000000005676-2-tps-1328-630.png" /></p>
<blockquote>
<div><p><strong>Visualization:</strong> Training curves are generated by SwanLab. See <a class="reference internal" href="visualization.html"><span class="std std-doc">Visualization Tools</span></a> for setup and usage.</p>
</div></blockquote>
<p>The upward trend in reward reflects improvement in two key areas:</p>
<ul class="simple">
<li><p><strong>Format compliance</strong>: the agent learns to emit well-formed <code class="docutils literal notranslate"><span class="pre">&lt;tool_call&gt;</span></code> JSON and wrap answers in <code class="docutils literal notranslate"><span class="pre">\boxed{...}</span></code>.</p></li>
<li><p><strong>Accuracy improvement</strong>: the agent achieves higher correctness rates in solving problems.</p></li>
</ul>
</section>
<section id="case-study">
<h3>4.2 Case Study<a class="headerlink" href="#case-study" title="Link to this heading">¶</a></h3>
<p>Agents are already able to deal with some simple problems at the beginning of the training process; however, small models inevitably produce many answers that fail to fully meet the requirements. In some problems, the agent does not strictly follow the instructions, such as invalid output format, reusing numbers, or missing expression outputs.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bad</span> <span class="n">case</span> <span class="mi">1</span><span class="p">:</span> <span class="n">Invalid</span> <span class="n">output</span> <span class="nb">format</span><span class="o">.</span>
<span class="o">&lt;|</span><span class="n">im_start</span><span class="o">|&gt;</span><span class="n">assistant</span>
<span class="o">&lt;</span><span class="n">tool_call</span><span class="o">&gt;</span>
<span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;generate_response&quot;</span><span class="p">,</span> <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="s2">&quot;Let&#39;s start by subtracting 28 from 76, which gives us 48. Now we need to get to 55 from 48. We can achieve this by adding 7 from the remaining numbers. However, 7 is not available. The next best number is 69. If we subtract 69 from 78, we get -11. If we subtract -11 from 48, we actually end up adding 11, which isn&#39;t one of our numbers. The correct approach would be to add 7 from the remaining numbers, but since 7 isn&#39;t available, we can use 69 and adjust our strategy. We can add 7 from the remaining numbers in another way. Let&#39;s try subtracting 69 from 78 to get -11, and then add 11 to 48. 11 can be obtained by subtracting 69 from 80, but since 80 isn&#39;t available, we&#39;ll use the next best approach. We&#39;ll subtract 69 from 78 to get -11, and then add 16 to 48 to reach 55. We can get 16 by subtracting 7 from 23, but since 23 isn&#39;t available, we need to find an alternative. The best way would be to use 78 - 69 = -11, and then 48 + 11 = 59 which is close but not 55. However, we can achieve 55 by using 78 - 69 + 7 = 55. So, the correct calculation is 78 - 69 + 7 = 55.&quot;</span><span class="p">}</span>
<span class="o">&lt;/</span><span class="n">tool_call</span><span class="o">&gt;&lt;|</span><span class="n">im_end</span><span class="o">|&gt;</span>

<span class="n">bad</span> <span class="n">case</span> <span class="mi">2</span><span class="p">:</span> <span class="n">Reusing</span> <span class="n">numbers</span> <span class="ow">in</span> <span class="n">expressions</span><span class="o">.</span>
<span class="o">&lt;|</span><span class="n">im_start</span><span class="o">|&gt;</span><span class="n">assistant</span>
 <span class="n">NavParams</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;response&quot;</span><span class="p">:</span> <span class="s2">&quot;Let&#39;s solve this step by step. We have the numbers 72, 20, and 4, and we need to reach the target number 38 using arithmetic operations.</span><span class="se">\n\n</span><span class="s2">First, let&#39;s try using subtraction and addition since 72 is quite large and can help us get closer to our target if we subtract something. We can subtract 20 from 72 to get 52, which is close but still far from 38. Now, we can subtract 4 from 52 to get 48, and then subtract 10 to reach 38. Since we don&#39;t have a 10 directly, we can use 20 - 4 = 16, and then subtract 16 from 48 to get 32, and finally add 6 (which is 4 + 2) to reach 38.</span><span class="se">\n\n</span><span class="s2">Let&#39;s try a more efficient approach: 72 - 20 = 52, and 52 - 4 = 48, now we need to reduce it by 10, which is 20 - 14, and 14 can be obtained by 20 - 4 - 2. So, 48 - (20 - 4 - 2) = 48 - 14 = 34, then we need 4 more to reach 38, which is simply 4. Thus, the solution is (72 - 20) - 4 - (20 - 4 - 2) + 4 = 38.&quot;</span><span class="p">}</span>
<span class="o">&lt;</span><span class="n">tool_call</span><span class="o">&gt;</span>
<span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;generate_response&quot;</span><span class="p">,</span> <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;response&quot;</span><span class="p">:</span> <span class="s2">&quot;The solution is </span><span class="se">\b</span><span class="s2">oxed{(72 - 20) - 4 - (20 - 4 - 2) + 4}. Let&#39;s break it down: </span><span class="se">\n</span><span class="s2">1. 72 - 20 = 52</span><span class="se">\n</span><span class="s2">2. 52 - 4 = 48</span><span class="se">\n</span><span class="s2">3. 20 - 4 - 2 = 14</span><span class="se">\n</span><span class="s2">4. 48 - 14 = 34</span><span class="se">\n</span><span class="s2">5. 34 + 4 = 38</span><span class="se">\n</span><span class="s2">Therefore, we reach the target number 38.&quot;</span><span class="p">}}</span>
<span class="o">&lt;/</span><span class="n">tool_call</span><span class="o">&gt;&lt;|</span><span class="n">im_end</span><span class="o">|&gt;</span>

<span class="n">bad</span> <span class="n">case</span> <span class="mi">3</span><span class="p">:</span> <span class="n">Missing</span> <span class="n">expression</span> <span class="n">outputs</span><span class="o">.</span>
<span class="o">&lt;|</span><span class="n">im_start</span><span class="o">|&gt;</span><span class="n">assistant</span>
<span class="o">&lt;</span><span class="n">tool_call</span><span class="o">&gt;</span>
<span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;generate_response&quot;</span><span class="p">,</span> <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;response&quot;</span><span class="p">:</span> <span class="s2">&quot;In this case, one straightforward way to reach the target number 64 is by directly using the number 64 itself, since it matches the target exactly. No other calculations are needed.&quot;</span><span class="p">}}</span>
<span class="n">boxing</span> <span class="n">the</span> <span class="n">answer</span> <span class="k">as</span> \<span class="n">boxed</span><span class="p">{{</span><span class="mi">64</span><span class="p">}}</span><span class="o">.&lt;|</span><span class="n">im_end</span><span class="o">|&gt;</span>
</pre></div>
</div>
<p>However, tuning resolves these issues, as shown in the example below:</p>
<ol class="arabic simple">
<li><p><strong>Message 3</strong>: decomposes the problem + emits a <code class="docutils literal notranslate"><span class="pre">&lt;tool_call&gt;</span></code>, and uses <code class="docutils literal notranslate"><span class="pre">\boxed{}</span></code> to output key values</p></li>
<li><p><strong>Message 4</strong>: decomposes the problem further, and reuses numbers in expressions.</p></li>
</ol>
<p><img alt="After tuning" src="https://img.alicdn.com/imgextra/i1/O1CN011HjAxo20DKIcPAPVr_!!6000000006815-2-tps-1658-506.png" />
<img alt="After tuning" src="https://img.alicdn.com/imgextra/i4/O1CN01C3kUnV221zjPi30rd_!!6000000007061-2-tps-1650-730.png" /></p>
<blockquote>
<div><p><strong>Token-level Visualization:</strong> These detailed logs are generated by Beast-Logger. See <a class="reference internal" href="beast_logger.html"><span class="std std-doc">Beast-Logger Usage</span></a> for more details.</p>
</div></blockquote>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./en"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>
        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="workflow.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Trainable Workflow</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="example_frozenlake.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Frozen Lake</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Tongyi Lab, Alibaba Inc.
            </div>
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on 2026-01-08</div>
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/modelscope/AgentJet" aria-label="GitHub"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
</svg>
</a>
              <a class="muted-link " href="https://discord.gg/eYMpfnkG8h" aria-label="Discord"><svg stroke="currentColor" fill="currentColor" stroke-width="0" t="1753331148815" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5721" width="200" height="200">
    <path d="M723.903423 359.138018c-69.65045-52.952793-136.256577-51.476757-136.256576-51.476757l-6.088649 7.564685c83.027027 25.738378 121.127207 62.085766 121.127207 62.085766a387.459459 387.459459 0 0 0-145.297297-46.956397 418.179459 418.179459 0 0 0-98.340901 1.752793 73.801802 73.801802 0 0 1-7.564684 1.476036 357.385225 357.385225 0 0 0-110.702703 30.258739 278.786306 278.786306 0 0 0-28.782703 13.653333S353.049369 339.488288 440.873514 313.657658l-4.612613-6.088649s-66.513874-1.476036-136.164324 51.476757A654.252973 654.252973 0 0 0 230.630631 642.167928s40.867748 71.126486 148.341621 73.801802c0 0 16.697658-22.694054 31.827027-40.867748-62.085766-18.45045-84.77982-57.565405-84.77982-57.565405a130.998198 130.998198 0 0 0 13.653334 7.564684s0 1.568288 1.476036 1.568289c1.476036 1.476036 3.044324 1.476036 4.52036 3.044324a238.748829 238.748829 0 0 0 34.779099 16.605405 513.199279 513.199279 0 0 0 71.218739 21.218018 350.558559 350.558559 0 0 0 125.555315 0 329.894054 329.894054 0 0 0 69.650451-21.218018A247.328288 247.328288 0 0 0 702.685405 618.09009s-24.262342 39.391712-87.824144 57.565405c13.653333 18.45045 31.827027 39.299459 31.827027 39.29946 107.473874-2.952072 148.341622-73.801802 146.773334-72.602523a654.990991 654.990991 0 0 0-69.558199-283.214414zM421.131532 596.77982a54.705586 54.705586 0 0 1 0-109.042162 54.705586 54.705586 0 0 1 0 109.042162z m177.124324 0a54.705586 54.705586 0 1 1 49.908468-54.521081 52.491532 52.491532 0 0 1-49.908468 54.521081z" p-id="5722"></path><path d="M512 1024A512 512 0 1 1 1024 512 512.645766 512.645766 0 0 1 512 1024z m0-972.892252a461.261261 461.261261 0 1 0 461.261261 461.261261 461.261261 461.261261 0 0 0-461.261261-461.261261z" p-id="5723"></path>
</svg>
</a>
              <a class="muted-link " href="https://qr.dingtalk.com/action/joingroup?code=v1,k1,OmDlBXpjW+I2vWjKDsjvI9dhcXjGZi3bQiojOq3dlDw=&_dt_no_comment=1&origin=11" aria-label="DingTalk"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
    <path d="M512 0C229.205333 0 0 229.205333 0 512s229.205333 512 512 512 512-229.205333 512-512S794.794667 0 512 0z m237.312 480.810667c-1.109333 4.48-3.712 11.093333-7.424 18.986666h0.128l-0.426667 0.682667c-21.504 46.037333-77.610667 136.106667-77.610666 136.106667l-0.298667-0.597334-16.384 28.501334h79.018667l-150.912 200.917333 34.304-136.533333h-62.208l21.589333-90.282667c-17.493333 4.224-38.101333 10.026667-62.592 17.92 0 0-33.109333 19.370667-95.317333-37.333333 0 0-41.984-36.992-17.578667-46.165334 10.410667-3.925333 50.304-8.917333 81.706667-13.226666 42.410667-5.674667 68.48-8.789333 68.48-8.789334s-130.773333 2.005333-161.792-2.901333c-30.976-4.906667-70.4-56.704-78.805334-102.186667 0 0-12.970667-25.002667 27.904-13.226666 40.917333 11.818667 210.005333 46.08 210.005334 46.08S321.109333 411.434667 306.517333 394.922667c-14.634667-16.469333-43.093333-89.770667-39.424-134.869334 0 0 1.621333-11.221333 13.098667-8.192 0 0 162.602667 74.282667 273.792 114.986667 111.104 40.704 207.786667 61.397333 195.328 114.005333z" opacity=".65" p-id="6077"></path>
</svg>
</a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Countdown</a><ul>
<li><a class="reference internal" href="#overview">1. Overview</a></li>
<li><a class="reference internal" href="#quick-start">2. Quick Start</a><ul>
<li><a class="reference internal" href="#preparation">2.1 Preparation</a></li>
<li><a class="reference internal" href="#start-training">2.2 Start Training</a></li>
</ul>
</li>
<li><a class="reference internal" href="#understand">3. Understand</a><ul>
<li><a class="reference internal" href="#core-process">3.1 Core Process</a></li>
<li><a class="reference internal" href="#configuration-details">3.2 Configuration Details</a></li>
<li><a class="reference internal" href="#code-map">3.3 Code Map</a></li>
<li><a class="reference internal" href="#reward-evaluation-mechanism">3.4 Reward/Evaluation Mechanism</a></li>
</ul>
</li>
<li><a class="reference internal" href="#results">4. Results</a><ul>
<li><a class="reference internal" href="#training-curves-metrics">4.1 Training Curves/Metrics</a></li>
<li><a class="reference internal" href="#case-study">4.2 Case Study</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=a8e58a58"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script src="../_static/language.js?v=5acd2cfa"></script>
    </body>
</html>