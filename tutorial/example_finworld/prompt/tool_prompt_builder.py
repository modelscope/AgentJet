"""
工具信息Prompt构建模块
用于生成清晰、结构化的工具使用说明
"""

def get_tool_prompt_template() -> str:
    """
    获取工具prompt模板(静态版本)
    基于实际探测到的19个工具进行配置
    
    Returns:
        预定义的工具说明文本
    """
    
    return """## 可用工具列表

### ⚠️ 重要说明
**股票代码格式规范**:
- 涉及A股代码时，通常使用 **6位纯数字** 格式（如 `000001`、`600000`）。
- **注意**: 用户输入股票名称时，必须先使用 `extract_entities_code` 转换为对应的代码。

---

### 🔍 实体与数据计算工具

#### ✅ extract_entities_code
**功能**: 从查询中提取金融实体（股票、债券、基金、加密货币、指数、商品、ETF等），并查找对应的代码。最后返回查询中出现的金融实体及其类型和代码。
**参数**:
  - `query` (必填, string): 关于金融实体的自然语言查询文本

#### ✅ history_calculate
**功能**: 获取指定A股股票的历史股价数据，并根据用户问题进行分析。
**数据结构**: 工具内部包含以下字段的历史数据：
  - `ts_code`(代码), `trade_date`(交易日期)
  - `open`(开), `high`(高), `low`(低), `close`(收), `pre_close`(昨收)
  - `change`(涨跌额), `pct_chg`(涨跌幅)
  - `vol`(成交量), `amount`(成交额)
**使用说明**: 你无需编写任何代码——只需直接提问即可，例如：“过去一周涨了多少，有没有出现顶背离？”、“MACD是否形成了金叉？”。
**参数**:
  - `code` (必填, string): A股代码 (如 '600000' 或 '000001')
  - `query` (必填, string): 关于股票历史表现的具体问题

---

### 💻 代码与通用网络工具

#### ✅ execute_code
**功能**: 执行 Python 代码，适用于复杂分析或计算场景。最终结果请使用 `print` 函数输出。
**参数**:
  - `code` (必填, string): 需要执行的代码

#### ✅ execute_shell
**功能**: 执行 Shell 命令 (如 `ls`, `pwd`, 运行脚本)。
**注意**: 每次调用起始目录相同。如需多步操作，请在一条命令中使用 `&&` 连接 (例如: `cd aa/bb && bash xxx`)。
**参数**:
  - `command` (必填, string): 需要执行的命令

#### ✅ dashscope_search
**功能**: 使用搜索关键词从互联网检索相关信息。如果有多个关键词，请分开多次调用。
**参数**:
  - `query` (必填, string): 搜索关键词

#### ✅ crawl_url
**功能**: 网页内容解析工具，获取并格式化指定URL的网页内容。
**参数**:
  - `url` (必填, string): 目标网页URL

# ---

### 📈 同花顺专项数据工具 (Crawl THS)
*以下工具用于获取特定维度的深度金融数据，请根据用户意图选择最匹配的工具*

#### ✅ crawl_ths_company
**功能**: 获取上市公司基本资料。
**数据范围**: 详细情况、高管介绍、发行相关、参控股公司。
**参数**:
  - `code` (必填, string): 股票代码 (6位数字)

#### ✅ crawl_ths_holder
**功能**: 获取股东研究信息。
**数据范围**: 股东人数、十大流通股东、十大股东、十大债券持有人、控股层级关系。
**参数**:
  - `code` (必填, string): 股票代码 (6位数字)

#### ✅ crawl_ths_operate
**功能**: 获取经营分析信息。
**数据范围**: 主营介绍、运营业务数据、主营构成分析、主要客户及供应商、董事会经营评述、产品价格。
**参数**:
  - `code` (必填, string): 股票代码 (6位数字)

#### ✅ crawl_ths_equity
**功能**: 获取股本结构信息。
**数据范围**: 解禁时间表、总股本构成、A股结构图、历次股本变动。
**参数**:
  - `code` (必填, string): 股票代码 (6位数字)

#### ✅ crawl_ths_capital
**功能**: 获取资本运作信息。
**数据范围**: 募集资金来源、项目投资、收购兼并、股权投资、参股IPO、股权转让、关联交易、质押解冻。
**参数**: 
  - `code` (必填, string): 股票代码 (6位数字)

#### ✅ crawl_ths_finance
**功能**: 获取财务分析信息。
**数据范围**: 财务诊断、财务指标、指标变动说明、资产负债构成、财务报告、杜邦分析。
**参数**:
  - `code` (必填, string): 股票代码 (6位数字)

#### ✅ crawl_ths_worth
**功能**: 获取盈利预测信息。
**数据范围**: 业绩预测、业绩预测详表、研报评级。
**参数**:
  - `code` (必填, string): 股票代码 (6位数字)

#### ✅ crawl_ths_news
**功能**: 获取新闻公告信息。
**数据范围**: 新闻与股价联动、公告列表、热点新闻列表、研报列表。
**参数**:
  - `code` (必填, string): 股票代码 (6位数字)

#### ✅ crawl_ths_concept
**功能**: 获取概念题材信息。
**数据范围**: 常规概念、其他概念、题材要点、概念对比。
**参数**:
  - `code` (必填, string): 股票代码 (6位数字)

#### ✅ crawl_ths_position
**功能**: 获取主力持仓信息。
**数据范围**: 机构持股汇总、机构持股明细、被举牌情况、IPO获配机构。
**参数**:
  - `code` (必填, string): 股票代码 (6位数字)

#### ✅ crawl_ths_bonus
**功能**: 获取分红融资信息。
**数据范围**: 分红诊断、分红情况、增发机构获配明细、增发概况、配股概况。
**参数**:
  - `code` (必填, string): 股票代码 (6位数字)

#### ✅ crawl_ths_event
**功能**: 获取公司大事信息。
**数据范围**: 高管持股变动、股东持股变动、担保明细、违规处理、机构调研、投资者互动。
**参数**:
  - `code` (必填, string): 股票代码 (6位数字)

#### ✅ crawl_ths_field
**功能**: 获取行业对比信息。
**数据范围**: 行业地位、行业新闻。
**参数**:
  - `code` (必填, string): 股票代码 (6位数字)
"""